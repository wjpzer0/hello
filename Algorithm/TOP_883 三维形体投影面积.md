# 题目

在 `n x n` 的网格 `grid` 中，我们放置了一些与 x，y，z 三轴对齐的 `1 x 1 x 1` 立方体。

每个值 `v = grid[i][j]` 表示 `v` 个正方体叠放在单元格 `(i, j)` 上。

现在，我们查看这些立方体在 `xy` 、`yz` 和 `zx` 平面上的*投影*。

**投影** 就像影子，将 **三维** 形体映射到一个 **二维** 平面上。从顶部、前面和侧面看立方体时，我们会看到“影子”。

返回 *所有三个投影的总面积* 。

**示例 1：**

![img](https://s3-lc-upload.s3.amazonaws.com/uploads/2018/08/02/shadow.png)

```
输入：[[1,2],[3,4]]
输出：17
解释：这里有该形体在三个轴对齐平面上的三个投影(“阴影部分”)。
```

**示例 2:**

```
输入：grid = [[2]]
输出：5
```

**示例 3：**

```
输入：[[1,0],[0,2]]
输出：8
```

**提示：**

- `n == grid.length == grid[i].length`
- `1 <= n <= 50`
- `0 <= grid[i][j] <= 50`

## 我的解法

嗯，没有问题！

```python
class Solution:
    def projectionArea(self, grid: List[List[int]]) -> int:
        ans = 0
        n = len(grid)
        xy = [0] * n
        for i in range(n):
            maxNum = 0
            for j in range(n):
                if grid[i][j] > xy[j]:
                    xy[j] = grid[i][j]
                if grid[i][j] > maxNum:
                    maxNum = grid[i][j]
                if grid[i][j] != 0:
                    ans += 1
            ans += maxNum
        ans += sum(xy)
        return ans
```

## 其他解法

### 数学

```c++
class Solution {
public:
    int projectionArea(vector<vector<int>> &grid) {
        int n = grid.size();
        int xyArea = 0, yzArea = 0, zxArea = 0;
        for (int i = 0; i < n; i++) {
            int yzHeight = 0, zxHeight = 0;
            for (int j = 0; j < n; j++) {
                xyArea += grid[i][j] > 0 ? 1 : 0;
                yzHeight = max(yzHeight, grid[j][i]);
                zxHeight = max(zxHeight, grid[i][j]);
            }
            yzArea += yzHeight;
            zxArea += zxHeight;
        }
        return xyArea + yzArea + zxArea;
    }
};
```

```java
class Solution {
    public int projectionArea(int[][] grid) {
        int n = grid.length;
        int xyArea = 0, yzArea = 0, zxArea = 0;
        for (int i = 0; i < n; i++) {
            int yzHeight = 0, zxHeight = 0;
            for (int j = 0; j < n; j++) {
                xyArea += grid[i][j] > 0 ? 1 : 0;
                yzHeight = Math.max(yzHeight, grid[j][i]);
                zxHeight = Math.max(zxHeight, grid[i][j]);
            }
            yzArea += yzHeight;
            zxArea += zxHeight;
        }
        return xyArea + yzArea + zxArea;
    }
}
```

```python
class Solution:
    def projectionArea(self, grid: List[List[int]]) -> int:
        xyArea = sum(v > 0 for row in grid for v in row)
        yzArea = sum(map(max, zip(*grid)))  # 注意这里为 O(n) 空间复杂度，改为下标枚举则可以 O(1)
        zxArea = sum(map(max, grid))
        return xyArea + yzArea + zxArea
```

#### 思路与算法

根据题意，$\texttt{x}$ 轴对应行，$\texttt{y}$ 轴对应列，$\texttt{z}$ 轴对应网格的数值。

因此：

- $\texttt{xy}$ 平面的投影面积等于网格上非零数值的数目；
- $\texttt{yz}$ 平面的投影面积等于网格上每一列最大数值之和；
- $\texttt{zx}$ 平面的投影面积等于网格上每一行最大数值之和。

返回上述三个投影面积之和。

#### **复杂度分析**

- 时间复杂度：$O(n^2)$，其中 n 是网格的行数或列数。
- 空间复杂度：O(1)。