# 题目

每个 **有效电子邮件地址** 都由一个 **本地名** 和一个 **域名** 组成，以 `'@'` 符号分隔。除小写字母之外，电子邮件地址还可以含有一个或多个 `'.'` 或 `'+'` 。

- 例如，在 `alice@leetcode.com`中， `alice` 是 **本地名** ，而 `leetcode.com` 是 **域名** 。

如果在电子邮件地址的 **本地名** 部分中的某些字符之间添加句点（`'.'`），则发往那里的邮件将会转发到本地名中没有点的同一地址。请注意，此规则 **不适用于域名** 。

- 例如，`"alice.z@leetcode.com”` 和 `“alicez@leetcode.com”` 会转发到同一电子邮件地址。

如果在 **本地名** 中添加加号（`'+'`），则会忽略第一个加号后面的所有内容。这允许过滤某些电子邮件。同样，此规则 **不适用于域名** 。

- 例如 `m.y+name@email.com` 将转发到 `my@email.com`。

可以同时使用这两个规则。

给你一个字符串数组 `emails`，我们会向每个 `emails[i]` 发送一封电子邮件。返回实际收到邮件的不同地址数目。

**示例 1：**

```
输入：emails = ["test.email+alex@leetcode.com","test.e.mail+bob.cathy@leetcode.com","testemail+david@lee.tcode.com"]
输出：2
解释：实际收到邮件的是 "testemail@leetcode.com" 和 "testemail@lee.tcode.com"。
```

**示例 2：**

```
输入：emails = ["a@leetcode.com","b@leetcode.com","c@leetcode.com"]
输出：3
**提示：**
```

- `1 <= emails.length <= 100`
- `1 <= emails[i].length <= 100`
- `emails[i]` 由小写英文字母、`'+'`、`'.'` 和 `'@'` 组成
- 每个 `emails[i]` 都包含有且仅有一个 `'@'` 字符
- 所有本地名和域名都不为空
- 本地名不会以 `'+'` 字符作为开头

## 我的解法

快速解决！但是代码不够优雅简洁！

```python
class Solution:
    def numUniqueEmails(self, emails: List[str]) -> int:
        ans = set()
        for email in emails:
            name = email.split('@')
            print(name)
            local = name[0]
            mid = ""
            for s in local:
                if s == '.':
                    continue
                elif s == '+':
                    break
                else:
                    mid += s
            name[0] = mid
            ans.add("@".join(name))
        return len(ans)
```

## 其他解法

### 哈希表

```c++
class Solution {
public:
    int numUniqueEmails(vector<string> &emails) {
        unordered_set<string> emailSet;
        for (auto &email: emails) {
            string local;
            for (char c: email) {
                if (c == '+' || c == '@') {
                    break;
                }
                if (c != '.') {
                    local += c;
                }
            }
            emailSet.emplace(local + email.substr(email.find('@')));
        }
        return emailSet.size();
    }
};
```

```java
class Solution {
    public int numUniqueEmails(String[] emails) {
        Set<String> emailSet = new HashSet<String>();
        for (String email : emails) {
            int i = email.indexOf('@');
            String local = email.substring(0, i).split("\\+")[0]; // 去掉本地名第一个加号之后的部分
            local = local.replace(".", ""); // 去掉本地名中所有的句点
            emailSet.add(local + email.substring(i));
        }
        return emailSet.size();
    }
}
```

```python
class Solution:
    def numUniqueEmails(self, emails: List[str]) -> int:
        emailSet = set()
        for email in emails:
            i = email.index('@')
            local = email[:i].split('+', 1)[0]  # 去掉本地名第一个加号之后的部分
            local = local.replace('.', '')  # 去掉本地名中所有的句点
            emailSet.add(local + email[i:])
        return len(emailSet)
```

根据题意，我们需要将每个邮件地址的本地名按照规则转换，具体来说：

- 去掉本地名中第一个加号之后的部分（包括加号）；
- 去掉本地名中所有的句点。

转换后得到了实际的邮件地址。

为了计算不同地址的数目，我们可以用一个哈希表记录所有的邮件地址，答案为哈希表的长度。

#### 复杂度分析

时间复杂度：O(L)，其中 LL 是 $\textit{emails}$中字符串的长度之和。

空间复杂度：O(L)。哈希表需要 O(L) 的空间。


